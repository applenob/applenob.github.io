<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222"><meta name="generator" content="Hexo 7.3.0">

  <link rel="apple-touch-icon" sizes="180x180" href="/images/favicon.ico">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon.ico">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon.ico">
  <link rel="mask-icon" href="/images/favicon.ico" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/all.min.css" integrity="sha256-5eIC48iZUHmSlSUz9XtjRyK2mzQkHScZY1WdMaoz74E=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"applenob.github.io","root":"/","images":"/images","scheme":"Pisces","darkmode":false,"version":"8.21.1","exturl":false,"sidebar":{"position":"left","width_expanded":320,"width_dual_column":240,"display":"post","padding":18,"offset":12},"hljswrap":true,"copycode":{"enable":false,"style":null},"fold":{"enable":false,"height":500},"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"transition":{"menu_item":"fadeInDown","post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"i18n":{"placeholder":"Searching...","empty":"We didn't find any results for the search: ${query}","hits_time":"${hits} results found in ${time} ms","hits":"${hits} results found"}}</script><script src="/js/config.js"></script>

    <meta name="description" content="动机最近在极客时间上买了一个课程名字叫《Python核心技术与实战》。链接戳这里：https:&#x2F;&#x2F;time.geekbang.org&#x2F;column&#x2F;intro&#x2F;176 我挺喜欢这种课程形式：一个业内比较资深的老师整理内容，然后找一个专业的声优再朗读一遍；文章中还有一些代码。我比较习惯上下班的时候听，这种碎片时间巩固下编程语言还是可以的。 不过后面感觉这个课程讲的不错，有些内容值得复习和深度阅读，因">
<meta property="og:type" content="article">
<meta property="og:title" content="《Python核心技术与实战》学习笔记">
<meta property="og:url" content="https://applenob.github.io/python/python_geek_class/index.html">
<meta property="og:site_name" content="Javen Chen&#39;s Blog">
<meta property="og:description" content="动机最近在极客时间上买了一个课程名字叫《Python核心技术与实战》。链接戳这里：https:&#x2F;&#x2F;time.geekbang.org&#x2F;column&#x2F;intro&#x2F;176 我挺喜欢这种课程形式：一个业内比较资深的老师整理内容，然后找一个专业的声优再朗读一遍；文章中还有一些代码。我比较习惯上下班的时候听，这种碎片时间巩固下编程语言还是可以的。 不过后面感觉这个课程讲的不错，有些内容值得复习和深度阅读，因">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://applenob.github.io/python/python_geek_class/guide.png">
<meta property="og:image" content="https://applenob.github.io/python/python_geek_class/stat_arb_arc.png">
<meta property="og:image" content="https://applenob.github.io/python/python_geek_class/message_queue.png">
<meta property="article:published_time" content="2019-08-05T02:08:00.000Z">
<meta property="article:modified_time" content="2024-11-10T20:30:54.098Z">
<meta property="article:author" content="Javen Chen">
<meta property="article:tag" content="笔记">
<meta property="article:tag" content="Python">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://applenob.github.io/python/python_geek_class/guide.png">


<link rel="canonical" href="https://applenob.github.io/python/python_geek_class/">


<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":false,"isPost":true,"lang":"en","comments":true,"permalink":"https://applenob.github.io/python/python_geek_class/","path":"python/python_geek_class/","title":"《Python核心技术与实战》学习笔记"}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>《Python核心技术与实战》学习笔记 | Javen Chen's Blog</title>
  








  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <div class="column">
      <header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <p class="site-title">Javen Chen's Blog</p>
      <i class="logo-line"></i>
    </a>
      <p class="site-subtitle" itemprop="description">Tech and Life~</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger" aria-label="Search" role="button">
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>Categories</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>Tags</a></li><li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>About</a></li>
  </ul>
</nav>




</header>
        
  
  <aside class="sidebar">

    <div class="sidebar-inner sidebar-nav-active sidebar-toc-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
            <div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%8A%A8%E6%9C%BA"><span class="nav-number">1.</span> <span class="nav-text">动机</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%9F%BA%E7%A1%80%E7%AF%87"><span class="nav-number">2.</span> <span class="nav-text">基础篇</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#01-%E5%A6%82%E4%BD%95%E9%80%90%E6%AD%A5%E7%AA%81%E7%A0%B4%EF%BC%8C%E6%88%90%E4%B8%BAPython%E9%AB%98%E6%89%8B%EF%BC%9F"><span class="nav-number">2.1.</span> <span class="nav-text">01 | 如何逐步突破，成为Python高手？</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#02-Jupyter-Notebook%E4%B8%BA%E4%BB%80%E4%B9%88%E6%98%AF%E7%8E%B0%E4%BB%A3Python%E7%9A%84%E5%BF%85%E5%AD%A6%E6%8A%80%E6%9C%AF%EF%BC%9F"><span class="nav-number">2.2.</span> <span class="nav-text">02 | Jupyter Notebook为什么是现代Python的必学技术？</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#03-%E5%88%97%E8%A1%A8%E5%92%8C%E5%85%83%E7%BB%84%EF%BC%8C%E5%88%B0%E5%BA%95%E7%94%A8%E5%93%AA%E4%B8%80%E4%B8%AA%EF%BC%9F"><span class="nav-number">2.3.</span> <span class="nav-text">03 | 列表和元组，到底用哪一个？</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#04-%E5%AD%97%E5%85%B8%E3%80%81%E9%9B%86%E5%90%88%EF%BC%8C%E4%BD%A0%E7%9C%9F%E7%9A%84%E4%BA%86%E8%A7%A3%E5%90%97%EF%BC%9F"><span class="nav-number">2.4.</span> <span class="nav-text">04 | 字典、集合，你真的了解吗？</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E8%BF%9B%E9%98%B6%E7%AF%87"><span class="nav-number">3.</span> <span class="nav-text">进阶篇</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#15-Python%E5%AF%B9%E8%B1%A1%E7%9A%84%E6%AF%94%E8%BE%83%E3%80%81%E6%8B%B7%E8%B4%9D"><span class="nav-number">3.1.</span> <span class="nav-text">15 | Python对象的比较、拷贝</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#17-%E5%BC%BA%E5%A4%A7%E7%9A%84%E8%A3%85%E9%A5%B0%E5%99%A8"><span class="nav-number">3.2.</span> <span class="nav-text">17 | 强大的装饰器</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%87%BD%E6%95%B0%E8%A3%85%E9%A5%B0%E5%99%A8"><span class="nav-number">3.2.1.</span> <span class="nav-text">函数装饰器</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%B1%BB%E8%A3%85%E9%A5%B0%E5%99%A8"><span class="nav-number">3.2.2.</span> <span class="nav-text">类装饰器</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#18-metaclass%EF%BC%8C%E6%98%AF%E6%BD%98%E5%A4%9A%E6%8B%89%E9%AD%94%E7%9B%92%E8%BF%98%E6%98%AF%E9%98%BF%E6%8B%89%E4%B8%81%E7%A5%9E%E7%81%AF%EF%BC%9F"><span class="nav-number">3.3.</span> <span class="nav-text">18 | metaclass，是潘多拉魔盒还是阿拉丁神灯？</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%8E%9F%E7%90%86"><span class="nav-number">3.3.1.</span> <span class="nav-text">原理</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#19-%E6%B7%B1%E5%85%A5%E7%90%86%E8%A7%A3%E8%BF%AD%E4%BB%A3%E5%99%A8%E5%92%8C%E7%94%9F%E6%88%90%E5%99%A8"><span class="nav-number">3.4.</span> <span class="nav-text">19 | 深入理解迭代器和生成器</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#21-Python%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B%E4%B9%8BFutures"><span class="nav-number">3.5.</span> <span class="nav-text">21 | Python并发编程之Futures</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%B9%B6%E5%8F%91-vs-%E5%B9%B6%E8%A1%8C"><span class="nav-number">3.5.1.</span> <span class="nav-text">并发 vs 并行</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Futures"><span class="nav-number">3.5.2.</span> <span class="nav-text">Futures</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#22-%E5%B9%B6%E5%8F%91%E7%BC%96%E7%A8%8B%E4%B9%8BAsyncio"><span class="nav-number">3.6.</span> <span class="nav-text">22 | 并发编程之Asyncio</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%A4%9A%E7%BA%BF%E7%A8%8B%E7%9A%84%E7%BC%BA%E7%82%B9"><span class="nav-number">3.6.1.</span> <span class="nav-text">多线程的缺点</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#sync-vs-async"><span class="nav-number">3.6.2.</span> <span class="nav-text">sync vs. async</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#asyncio%E5%B7%A5%E4%BD%9C%E5%8E%9F%E7%90%86"><span class="nav-number">3.6.3.</span> <span class="nav-text">asyncio工作原理</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#ayncio%E7%94%A8%E6%B3%95"><span class="nav-number">3.6.4.</span> <span class="nav-text">ayncio用法</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#24-%E5%B8%A6%E4%BD%A0%E8%A7%A3%E6%9E%90-Python-%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6%E6%9C%BA%E5%88%B6"><span class="nav-number">3.7.</span> <span class="nav-text">24 | 带你解析 Python 垃圾回收机制</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E8%A7%84%E8%8C%83%E7%AF%87"><span class="nav-number">4.</span> <span class="nav-text">规范篇</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#29-%E5%B7%A7%E7%94%A8%E4%B8%8A%E4%B8%8B%E6%96%87%E7%AE%A1%E7%90%86%E5%99%A8%E5%92%8CWith%E8%AF%AD%E5%8F%A5%E7%B2%BE%E7%AE%80%E4%BB%A3%E7%A0%81"><span class="nav-number">4.1.</span> <span class="nav-text">29 | 巧用上下文管理器和With语句精简代码</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E9%87%8F%E5%8C%96%E4%BA%A4%E6%98%93%E5%AE%9E%E6%88%98%E7%AF%87"><span class="nav-number">5.</span> <span class="nav-text">量化交易实战篇</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#33-%E5%B8%A6%E4%BD%A0%E5%88%9D%E6%8E%A2%E9%87%8F%E5%8C%96%E4%B8%96%E7%95%8C"><span class="nav-number">5.1.</span> <span class="nav-text">33 | 带你初探量化世界</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#34-RESTful-Socket-%E6%90%AD%E5%BB%BA%E4%BA%A4%E6%98%93%E6%89%A7%E8%A1%8C%E5%B1%82%E6%A0%B8%E5%BF%83"><span class="nav-number">5.2.</span> <span class="nav-text">34 | RESTful &amp; Socket: 搭建交易执行层核心</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#35-RESTful-Socket-%E8%A1%8C%E6%83%85%E6%95%B0%E6%8D%AE%E5%AF%B9%E6%8E%A5%E5%92%8C%E6%8A%93%E5%8F%96"><span class="nav-number">5.3.</span> <span class="nav-text">35 | RESTful &amp; Socket: 行情数据对接和抓取</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#36-Pandas-Numpy-%E7%AD%96%E7%95%A5%E4%B8%8E%E5%9B%9E%E6%B5%8B%E7%B3%BB%E7%BB%9F"><span class="nav-number">5.4.</span> <span class="nav-text">36 | Pandas &amp; Numpy: 策略与回测系统</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#37-Kafka-ZMQ%EF%BC%9A%E8%87%AA%E5%8A%A8%E5%8C%96%E4%BA%A4%E6%98%93%E6%B5%81%E6%B0%B4%E7%BA%BF"><span class="nav-number">5.5.</span> <span class="nav-text">37 | Kafka &amp; ZMQ：自动化交易流水线</span></a></li></ol></li></ol></div>
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="Javen Chen"
      src="/images/ggb.png">
  <p class="site-author-name" itemprop="name">Javen Chen</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">95</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
          <a href="/categories/">
        <span class="site-state-item-count">19</span>
        <span class="site-state-item-name">categories</span></a>
      </div>
      <div class="site-state-item site-state-tags">
          <a href="/tags/">
        <span class="site-state-item-count">23</span>
        <span class="site-state-item-name">tags</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author animated">
      <span class="links-of-author-item">
        <a href="https://github.com/applenob" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;applenob" rel="noopener me" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:applenobcer@gmail.com" title="E-Mail → mailto:applenobcer@gmail.com" rel="noopener me" target="_blank"><i class="fa fa-envelope fa-fw"></i>E-Mail</a>
      </span>
  </div>
  <div class="cc-license animated" itemprop="license">
    <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/zh-Hans" class="cc-opacity" rel="noopener" target="_blank"><img src="https://cdnjs.cloudflare.com/ajax/libs/creativecommons-vocabulary/2020.11.3/assets/license_badges/small/by_nc_sa.svg" alt="Creative Commons"></a>
  </div>

        </div>
      </div>
    </div>

    
  </aside>


    </div>

    <div class="main-inner post posts-expand">


  


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="en">
    <link itemprop="mainEntityOfPage" href="https://applenob.github.io/python/python_geek_class/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/ggb.png">
      <meta itemprop="name" content="Javen Chen">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Javen Chen's Blog">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="《Python核心技术与实战》学习笔记 | Javen Chen's Blog">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          《Python核心技术与实战》学习笔记
        </h1>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2019-08-04 19:08:00" itemprop="dateCreated datePublished" datetime="2019-08-04T19:08:00-07:00">2019-08-04</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2024-11-10 12:30:54" itemprop="dateModified" datetime="2024-11-10T12:30:54-08:00">2024-11-10</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Python/" itemprop="url" rel="index"><span itemprop="name">Python</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody"><h1 id="动机"><a href="#动机" class="headerlink" title="动机"></a>动机</h1><p>最近在极客时间上买了一个课程名字叫《Python核心技术与实战》。链接戳这里：<a href="https://time.geekbang.org/column/intro/176">https://time.geekbang.org/column/intro/176</a></p>
<p>我挺喜欢这种课程形式：一个业内比较资深的老师整理内容，然后找一个专业的声优再朗读一遍；文章中还有一些代码。我比较习惯上下班的时候听，这种碎片时间巩固下编程语言还是可以的。</p>
<p>不过后面感觉这个课程讲的不错，有些内容值得复习和深度阅读，因此开这篇笔记。</p>
<h1 id="基础篇"><a href="#基础篇" class="headerlink" title="基础篇"></a>基础篇</h1><h2 id="01-如何逐步突破，成为Python高手？"><a href="#01-如何逐步突破，成为Python高手？" class="headerlink" title="01 | 如何逐步突破，成为Python高手？"></a>01 | 如何逐步突破，成为Python高手？</h2><p><img src="/python/python_geek_class/guide.png"></p>
<h2 id="02-Jupyter-Notebook为什么是现代Python的必学技术？"><a href="#02-Jupyter-Notebook为什么是现代Python的必学技术？" class="headerlink" title="02 | Jupyter Notebook为什么是现代Python的必学技术？"></a>02 | Jupyter Notebook为什么是现代Python的必学技术？</h2><p>Jupyter Notebook的优点：</p>
<ul>
<li>整合所有的资源</li>
<li>交互性编程体验</li>
<li>零成本重现结果</li>
</ul>
<h2 id="03-列表和元组，到底用哪一个？"><a href="#03-列表和元组，到底用哪一个？" class="headerlink" title="03 | 列表和元组，到底用哪一个？"></a>03 | 列表和元组，到底用哪一个？</h2><p>基础区别：</p>
<ul>
<li>列表是动态的，长度大小不固定，可以随意地增加、删减或者改变元素（mutable）。</li>
<li>而元组是静态的，长度大小固定，无法增加删减或者改变（immutable).</li>
</ul>
<h2 id="04-字典、集合，你真的了解吗？"><a href="#04-字典、集合，你真的了解吗？" class="headerlink" title="04 | 字典、集合，你真的了解吗？"></a>04 | 字典、集合，你真的了解吗？</h2><p>集合并不支持索引操作，因为集合本质上是一个哈希表，和列表不一样。</p>
<p>新版哈希表结构：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">Indices</span><br><span class="line">----------------------------------------------------</span><br><span class="line">None | index | None | None | index | None | index ...</span><br><span class="line">----------------------------------------------------</span><br><span class="line"></span><br><span class="line">Entries</span><br><span class="line">--------------------</span><br><span class="line">hash0   key0  value0</span><br><span class="line">---------------------</span><br><span class="line">hash1   key1  value1</span><br><span class="line">---------------------</span><br><span class="line">hash2   key2  value2</span><br><span class="line">---------------------</span><br><span class="line">        ...</span><br><span class="line">---------------------</span><br></pre></td></tr></table></figure>

<h1 id="进阶篇"><a href="#进阶篇" class="headerlink" title="进阶篇"></a>进阶篇</h1><h2 id="15-Python对象的比较、拷贝"><a href="#15-Python对象的比较、拷贝" class="headerlink" title="15 | Python对象的比较、拷贝"></a>15 | Python对象的比较、拷贝</h2><p><code>==</code> VS <code>is</code>：</p>
<ul>
<li><code>==</code>判断两个对象的值是否相等，执行<code>a == b</code>相当于是去执行<code>a.__eq__(b)</code>。</li>
<li><code>is</code>比较两个对象的身份标识符是否相等。执行<code>a is b</code>等价于<code>id(a) == id(b)</code></li>
</ul>
<h2 id="17-强大的装饰器"><a href="#17-强大的装饰器" class="headerlink" title="17 | 强大的装饰器"></a>17 | 强大的装饰器</h2><h3 id="函数装饰器"><a href="#函数装饰器" class="headerlink" title="函数装饰器"></a>函数装饰器</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">my_decorator</span>(<span class="params">func</span>):</span><br><span class="line"><span class="meta">    @functools.wrap</span></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">wrapper</span>(<span class="params">*args, **kwargs</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;wrapper of decorator&#x27;</span>)</span><br><span class="line">        func(*args, **kwargs)</span><br><span class="line">    <span class="keyword">return</span> wrapper</span><br><span class="line"></span><br><span class="line"><span class="meta">@my_decorator</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">greet</span>():</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;hello world&#x27;</span>)</span><br><span class="line"></span><br><span class="line">greet()</span><br></pre></td></tr></table></figure>

<ul>
<li><code>@</code>是语法糖<code>@my_decorator</code>就相当于前面的<code>greet=my_decorator(greet)</code></li>
<li>一般使用装饰器后，原函数的元信息会丢失。使用<code>@functools.wrap</code>帮助保留原函数的元信息。</li>
</ul>
<h3 id="类装饰器"><a href="#类装饰器" class="headerlink" title="类装饰器"></a>类装饰器</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Count</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, func</span>):</span><br><span class="line">        <span class="variable language_">self</span>.func = func</span><br><span class="line">        <span class="variable language_">self</span>.num_calls = <span class="number">0</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__call__</span>(<span class="params">self, *args, **kwargs</span>):</span><br><span class="line">        <span class="variable language_">self</span>.num_calls += <span class="number">1</span></span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;num of calls is: &#123;&#125;&#x27;</span>.<span class="built_in">format</span>(<span class="variable language_">self</span>.num_calls))</span><br><span class="line">        <span class="keyword">return</span> <span class="variable language_">self</span>.func(*args, **kwargs)</span><br><span class="line"></span><br><span class="line"><span class="meta">@Count</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">example</span>():</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&quot;hello world&quot;</span>)</span><br><span class="line"></span><br><span class="line">example()</span><br><span class="line"></span><br><span class="line"><span class="comment"># 输出</span></span><br><span class="line">num of calls <span class="keyword">is</span>: <span class="number">1</span></span><br><span class="line">hello world</span><br><span class="line"></span><br><span class="line">example()</span><br><span class="line"></span><br><span class="line"><span class="comment"># 输出</span></span><br><span class="line">num of calls <span class="keyword">is</span>: <span class="number">2</span></span><br><span class="line">hello world</span><br><span class="line"></span><br><span class="line">...</span><br></pre></td></tr></table></figure>

<ul>
<li><code>@Count</code>等价于<code>example=Count(example)</code></li>
<li>后面继续调用<code>example()</code>等于调用<code>Count</code>的<code>__call__</code></li>
</ul>
<h2 id="18-metaclass，是潘多拉魔盒还是阿拉丁神灯？"><a href="#18-metaclass，是潘多拉魔盒还是阿拉丁神灯？" class="headerlink" title="18 | metaclass，是潘多拉魔盒还是阿拉丁神灯？"></a>18 | metaclass，是潘多拉魔盒还是阿拉丁神灯？</h2><p><code>Meta</code>的两种意思：</p>
<ul>
<li>“Beyond”，例如技术词汇 <code>metadata</code>，意思是描述数据的超越数据；</li>
<li>“Change”，例如技术词汇 <code>metamorphosis</code>，意思是改变的形态。</li>
</ul>
<p>即，<code>metaclass</code>具有<strong>超越变形</strong>特性。</p>
<p>YAMLObject源代码：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">YAMLObjectMetaclass</span>(<span class="title class_ inherited__">type</span>):</span><br><span class="line">  <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">cls, name, bases, kwds</span>):</span><br><span class="line">    <span class="built_in">super</span>(YAMLObjectMetaclass, cls).__init__(name, bases, kwds)</span><br><span class="line">    <span class="keyword">if</span> <span class="string">&#x27;yaml_tag&#x27;</span> <span class="keyword">in</span> kwds <span class="keyword">and</span> kwds[<span class="string">&#x27;yaml_tag&#x27;</span>] <span class="keyword">is</span> <span class="keyword">not</span> <span class="literal">None</span>:</span><br><span class="line">      cls.yaml_loader.add_constructor(cls.yaml_tag, cls.from_yaml)</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">YAMLObject</span>(metaclass=YAMLObjectMetaclass):</span><br><span class="line">  yaml_loader = Loader</span><br><span class="line">  <span class="comment"># 省略其余定义</span></span><br></pre></td></tr></table></figure>

<p>在你定义任何<code>YAMLObject</code>子类时，Python会强行插入运行下面这段代码:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cls.yaml_loader.add_constructor(cls.yaml_tag, cls.from_yaml)</span><br></pre></td></tr></table></figure>

<h3 id="原理"><a href="#原理" class="headerlink" title="原理"></a>原理</h3><ul>
<li>所有Python的<strong>用户定义类都</strong>是<code>type</code>这个类的实例。<ul>
<li><code>class MyClass: ...</code> 等价于<code>MyClass = type(classname, superclasses, attributedict)</code></li>
<li><code>type</code>的<code>__call__</code>又会进一步调用：<code>type.__new__(typeclass, classname, superclasses, attributedict)</code>和<code>type.__init__(class, classname, superclasses, attributedict)</code></li>
</ul>
</li>
<li><code>metaclass</code>是<code>type</code>的<strong>子类</strong>，通过重载<code>type</code>的<code>__call__</code>运算符，“超越变形”正常的类。</li>
</ul>
<p>建议：<code>metaclass</code>用于框架层开发，不用在应用层开发。</p>
<h2 id="19-深入理解迭代器和生成器"><a href="#19-深入理解迭代器和生成器" class="headerlink" title="19 | 深入理解迭代器和生成器"></a>19 | 深入理解迭代器和生成器</h2><p>对象的抽象就是类，而对象的集合就是容器。所有的容器都是可迭代的（iterable）。</p>
<ul>
<li>可迭代对象（Iterable）：实现了<code>__iter__</code>，通过<code>iter()</code>函数可以返回一个迭代器。</li>
<li>迭代器（Iterator）：实现了<code>__next__</code>，通过<code>next()</code>方法，要么获取容器的下一个对象，要么得到一个<code>StopIteration</code>错误。</li>
<li>生成器（Generator）：生成器是懒人版的迭代器。外部程序在调用<code>next(gen)</code>时，进入生成器，直到<code>yield</code>处返回，生成器暂停；下次再调用<code>next(gen)</code>时，回到生成器继续执行直到下一处<code>yield</code>。</li>
</ul>
<h2 id="21-Python并发编程之Futures"><a href="#21-Python并发编程之Futures" class="headerlink" title="21 | Python并发编程之Futures"></a>21 | Python并发编程之Futures</h2><h3 id="并发-vs-并行"><a href="#并发-vs-并行" class="headerlink" title="并发 vs 并行"></a>并发 vs 并行</h3><ul>
<li><strong>并发</strong>（Concurrency）：多个任务同时进行，但在具体的同一时刻只有一个任务在进行。应用于<br>I&#x2F;O 操作频繁的场景，比如你要从网站上下载多个文件，I&#x2F;O 操作的时间可能会比 CPU<br>运行处理的时间长得多。python中一般用<code>threading</code>和<code>asyncio</code>。</li>
<li><strong>并行</strong>（Parallelism）：多个任务是同一时刻、同时发生。更多应用于 CPU heavy<br>的场景，比如 MapReduce<br>中的并行计算，为了加快运行速度，一般会用多台机器、多个处理器来完成。python中一般用multi-processing。</li>
</ul>
<h3 id="Futures"><a href="#Futures" class="headerlink" title="Futures"></a>Futures</h3><p>Python 中的 <code>Futures</code> 模块，位于 <code>concurrent.futures</code> 和 <code>asyncio</code><br>中，它们都表示<strong>带有延迟的操作</strong>。</p>
<p><code>future = xxx.submit(func)</code>：future一般通过某个类的<code>submit</code>方法生成。</p>
<p>future的重要方法：</p>
<ul>
<li><code>done()</code>：表示相对应的操作是否完成，会立即返回结果。</li>
<li><code>add_done_callback(fn)</code>：表示future完成后，回调函数<code>fn</code>会被执行。</li>
<li><code>result()</code>：表示当future完成后，返回其对应的结果或异常。</li>
<li><code>as_completed(fs)</code>：给定的future迭代器<code>fs</code>，在其完成后，返回完成后的迭代器。</li>
</ul>
<h2 id="22-并发编程之Asyncio"><a href="#22-并发编程之Asyncio" class="headerlink" title="22 | 并发编程之Asyncio"></a>22 | 并发编程之Asyncio</h2><h3 id="多线程的缺点"><a href="#多线程的缺点" class="headerlink" title="多线程的缺点"></a>多线程的缺点</h3><ul>
<li>多线程运行过程容易被打断，出现资源竞争的现象；</li>
<li>线程切换本身存在一定的损耗，线程数不能无限增加。</li>
</ul>
<h3 id="sync-vs-async"><a href="#sync-vs-async" class="headerlink" title="sync vs. async"></a>sync vs. async</h3><ul>
<li>同步是指操作一个接一个执行（按顺序，等待上一个操作完成）。</li>
<li>异步是指不同的操作间可以互相交替执行。（交替，上一个操作如果被block，可以不等待，先执行）</li>
</ul>
<h3 id="asyncio工作原理"><a href="#asyncio工作原理" class="headerlink" title="asyncio工作原理"></a>asyncio工作原理</h3><ul>
<li>单线程，即主线程。</li>
<li>可以进行任务（对应特殊的future对象）切换。</li>
<li>不同的任务，被一个<code>event loop</code>对象控制，控制逻辑：<ul>
<li>维护两个任务状态列表：1.预备状态任务列表，该列表的任务目前随时准备开始运行；2.等待状态任务列表，该列表的任务已经运行但正在等待外部操作完成（比如IO）。</li>
<li>控制权：<ul>
<li><code>event loop</code>选择task开始运行。</li>
<li>task运行直到结束或者等待。</li>
<li><code>event loop</code>根据task是结束还是等待，更新维护的两个状态列表，结束则放入预备状态列表，等待则放入等待状态列表。然后再次选择下一个要运行的task。</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="ayncio用法"><a href="#ayncio用法" class="headerlink" title="ayncio用法"></a>ayncio用法</h3><p><code>async</code>和<code>await</code>关键字是asyncio最新写法，表示这个语句 &#x2F; 函数是 <code>non-block</code> 的。<code>async</code>关键字定义一个协程（函数或者对象），<code>await</code>关键字用于挂起阻塞的异步调用接口。如果一个对象可以在<code>await</code>语句中使用，那么它就是<code>awaitables</code>对象，有三种主要类型: <code>coroutines</code> , <code>Task</code> 和 <code>Future</code>.</p>
<p><code>asyncio.run()</code>是python3.7才引入的，老版本等价代码：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">loop = asyncio.get_event_loop()</span><br><span class="line"><span class="keyword">try</span>:</span><br><span class="line">    loop.run_until_complete(coro)</span><br><span class="line"><span class="keyword">finally</span>:</span><br><span class="line">    loop.close()</span><br></pre></td></tr></table></figure>

<h2 id="24-带你解析-Python-垃圾回收机制"><a href="#24-带你解析-Python-垃圾回收机制" class="headerlink" title="24 | 带你解析 Python 垃圾回收机制"></a>24 | 带你解析 Python 垃圾回收机制</h2><p><code>sys.getrefcount()</code>函数可以查看一个对象的引用次数，该函数本身也会引入一次计数。</p>
<p>可以显式调用<code>gc.collect()</code>，来启动垃圾回收。Python<br>使用<strong>标记清除</strong>（mark-sweep）算法和<strong>分代收集</strong>（generational），来启用针对循环引用的自动垃圾回收。</p>
<h1 id="规范篇"><a href="#规范篇" class="headerlink" title="规范篇"></a>规范篇</h1><h2 id="29-巧用上下文管理器和With语句精简代码"><a href="#29-巧用上下文管理器和With语句精简代码" class="headerlink" title="29 | 巧用上下文管理器和With语句精简代码"></a>29 | 巧用上下文管理器和With语句精简代码</h2><p>基于类的上下文管理器</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">FileManager</span>:</span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__init__</span>(<span class="params">self, name, mode</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;calling __init__ method&#x27;</span>)</span><br><span class="line">        <span class="variable language_">self</span>.name = name</span><br><span class="line">        <span class="variable language_">self</span>.mode = mode </span><br><span class="line">        <span class="variable language_">self</span>.file = <span class="literal">None</span></span><br><span class="line">        </span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__enter__</span>(<span class="params">self</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;calling __enter__ method&#x27;</span>)</span><br><span class="line">        <span class="variable language_">self</span>.file = <span class="built_in">open</span>(<span class="variable language_">self</span>.name, <span class="variable language_">self</span>.mode)</span><br><span class="line">        <span class="keyword">return</span> <span class="variable language_">self</span>.file</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">def</span> <span class="title function_">__exit__</span>(<span class="params">self, exc_type, exc_val, exc_tb</span>):</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">&#x27;calling __exit__ method&#x27;</span>)</span><br><span class="line">        <span class="keyword">if</span> <span class="variable language_">self</span>.file:</span><br><span class="line">            <span class="variable language_">self</span>.file.close()</span><br><span class="line">            </span><br><span class="line"><span class="keyword">with</span> FileManager(<span class="string">&#x27;test.txt&#x27;</span>, <span class="string">&#x27;w&#x27;</span>) <span class="keyword">as</span> f:</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">&#x27;ready to write to file&#x27;</span>)</span><br><span class="line">    f.write(<span class="string">&#x27;hello world&#x27;</span>)</span><br><span class="line">    </span><br><span class="line"><span class="comment">## 输出</span></span><br><span class="line"><span class="comment"># calling __init__ method</span></span><br><span class="line"><span class="comment"># calling __enter__ method</span></span><br><span class="line"><span class="comment"># ready to write to file</span></span><br><span class="line"><span class="comment"># calling __exit__ method</span></span><br></pre></td></tr></table></figure>

<p>基于生成器的上下文管理器：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">from</span> contextlib <span class="keyword">import</span> contextmanager</span><br><span class="line"></span><br><span class="line"><span class="meta">@contextmanager</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">file_manager</span>(<span class="params">name, mode</span>):</span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        f = <span class="built_in">open</span>(name, mode)</span><br><span class="line">        <span class="keyword">yield</span> f</span><br><span class="line">    <span class="keyword">finally</span>:</span><br><span class="line">        f.close()</span><br><span class="line">        </span><br><span class="line"><span class="keyword">with</span> file_manager(<span class="string">&#x27;test.txt&#x27;</span>, <span class="string">&#x27;w&#x27;</span>) <span class="keyword">as</span> f:</span><br><span class="line">    f.write(<span class="string">&#x27;hello world&#x27;</span>)</span><br></pre></td></tr></table></figure>

<ul>
<li>基于类的上下文管理器更加 flexible，适用于大型的系统开发；</li>
<li>而基于生成器的上下文管理器更加方便、简洁，适用于中小型程序。</li>
</ul>
<h1 id="量化交易实战篇"><a href="#量化交易实战篇" class="headerlink" title="量化交易实战篇"></a>量化交易实战篇</h1><h2 id="33-带你初探量化世界"><a href="#33-带你初探量化世界" class="headerlink" title="33 | 带你初探量化世界"></a>33 | 带你初探量化世界</h2><ul>
<li><p><strong>程序化交易</strong>：它通常用计算机程序代替交易员，来具体执行金融产品的买卖。比如，一个基金经理需要卖出大量股票。如果直接挂一个大的卖单，可能会影响市场，那就用计算机程序拆分成小单慢慢执行。量化交易的下层通常是程序交易。</p>
</li>
<li><p><strong>算法交易</strong>：通常用于高频交易中。它指的是，通过算法快速判定买卖的时间点，快速买卖多个产品。</p>
</li>
<li><p><strong>量化交易</strong>：通常是指使用数学、统计甚至机器学习的方法，去找寻合适的买卖时机。所以，在这个维度的定义之下，算法交易、高频交易还有统计套利都可以算作量化交易。</p>
</li>
<li><p>盈透证券：提供支持股票、期权的行情数据获取和交易的接口。</p>
</li>
<li><p>Gemini、OKCoin（交易所）：提供进行数字货币行情获取和交易的接口。</p>
</li>
</ul>
<p>一个基本的交易系统包括：</p>
<ul>
<li><strong>行情模块</strong>：获取市场的行情数据，负责获取交易账户的状态。</li>
<li><strong>策略模块</strong>：订阅市场的数据，根据设定的算法发出买、卖指令给执行模块。</li>
<li><strong>执行模块</strong>：接受并把策略模块发过来的买、卖指令封装并转发到交易所；同时，监督并确保策略买卖的完整执行。</li>
<li><strong>回测系统</strong>：模拟检测当前的策略。</li>
</ul>
<p><img src="/python/python_geek_class/stat_arb_arc.png"></p>
<h2 id="34-RESTful-Socket-搭建交易执行层核心"><a href="#34-RESTful-Socket-搭建交易执行层核心" class="headerlink" title="34 | RESTful &amp; Socket: 搭建交易执行层核心"></a>34 | RESTful &amp; Socket: 搭建交易执行层核心</h2><p>REST 的全称是表征层状态转移（REpresentational State Transfer）。实质可以理解为：通过 URL 定位资源，用 GET、POST、PUT、DELETE 等动词来描述操作。每个 REST 请求都是独立的，不需要服务器在会话（Session）中缓存中间状态来完成这个请求，即无状态。</p>
<ul>
<li>maker：挂单者。</li>
<li>taker：吃单者。</li>
<li>买（buy）：用美元买入比特币的行为。</li>
<li>卖（sell）：用比特币换取美元的行为。</li>
<li>市价单（market order）：给交易所一个方向（买或者卖）和一个数量，交易所把给定数量的美元（或者比特币）换成比特币（或者美元）的单子。</li>
<li>限价单（limit order）：给交易所一个价格、一个方向（买或者卖）和一个数量，交易所在价格达到给定价格的时候，把给定数量的美元（或者比特币）换成比特币（或者美元）的单子。</li>
</ul>
<h2 id="35-RESTful-Socket-行情数据对接和抓取"><a href="#35-RESTful-Socket-行情数据对接和抓取" class="headerlink" title="35 | RESTful &amp; Socket: 行情数据对接和抓取"></a>35 | RESTful &amp; Socket: 行情数据对接和抓取</h2><p>交易所主要有两种行情数据：委托账本（Order Book）和活动行情（Tick data）。</p>
<p>WebSocket 是一种在单个 TCP&#x2F;TSL 连接上，进行全双工、双向通信的协议。WebSocket 可以让客户端与服务器之间的数据交换变得更加简单高效，服务端也可以主动向客户端推送数据。在 WebSocket API 中，浏览器和服务器只需要完成一次握手，两者之间就可以直接创建持久性的连接，并进行双向数据传输。</p>
<p>行情模块可以使用Gemini提供的两种Websocket接口：</p>
<ul>
<li>public：公开orderbook，每个人都能看到的当前挂单价和深度。</li>
<li>private：个人订单被执行等变动的通知。</li>
</ul>
<h2 id="36-Pandas-Numpy-策略与回测系统"><a href="#36-Pandas-Numpy-策略与回测系统" class="headerlink" title="36 | Pandas &amp; Numpy: 策略与回测系统"></a>36 | Pandas &amp; Numpy: 策略与回测系统</h2><p>OHLCV 数据：开盘价（Open）、最高价（High）、最低价（Low）和收盘价（Close），还有一个成交量（Volume）。</p>
<p>常见的两类回测框架：</p>
<ul>
<li>向量化回测框架：通常基于 Pandas+Numpy 来自己搭建计算核心；后端则是用 MySQL 或者 MongoDB 作为源。这种框架通过 Pandas+Numpy 对 OHLC 数组进行向量运算，可以在较长的历史数据上进行回测。不过，因为这类框架一般只用 OHLC，所以模拟会比较粗糙。</li>
<li>事件驱动型回测框架：本质上是针对每一个 tick 的变动或者 orderbook 的变动生成事件；然后，再把一个个事件交给策略进行执行。因此，虽然它的拓展性很强，可以允许更加灵活的策略，但回测速度是很慢的。</li>
</ul>
<p>成熟的回测框架：</p>
<ul>
<li>Zipline，就是一个热门的事件驱动型回测框架，背后有大型社区和文档的支持。</li>
<li>PyAlgoTrade 也是事件驱动的回测框架，文档相对完整，整合了知名的技术分析（Techique Analysis）库 TA-Lib。在速度和灵活方面，它比 Zipline 强。不过，它的一大硬伤是不支持 Pandas 的模块和对象。</li>
</ul>
<h2 id="37-Kafka-ZMQ：自动化交易流水线"><a href="#37-Kafka-ZMQ：自动化交易流水线" class="headerlink" title="37 | Kafka &amp; ZMQ：自动化交易流水线"></a>37 | Kafka &amp; ZMQ：自动化交易流水线</h2><p>中间件，是将技术底层工具和应用层进行连接的组件。</p>
<p>简而言之，消息队列就是一个临时存放消息的容器，有人向消息队列中推送消息；有人则监听消息队列，发现新消息就会取走。根据我们刚刚对中间件的解释，清晰可见，消息队列也是一种中间件。</p>
<p>市面上使用较多的消息队列有 RabbitMQ、Kafka、RocketMQ、ZMQ 等。</p>
<p><img src="/python/python_geek_class/message_queue.png"></p>

    </div>

    
    
    

    <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/%E7%AC%94%E8%AE%B0/" rel="tag"># 笔记</a>
              <a href="/tags/Python/" rel="tag"># Python</a>
          </div>

        

          <div class="post-nav">
            <div class="post-nav-item">
                <a href="/dialog_sys/rasa/" rel="prev" title="Rasa学习总结">
                  <i class="fa fa-angle-left"></i> Rasa学习总结
                </a>
            </div>
            <div class="post-nav-item">
                <a href="/dialog_sys/redp/" rel="next" title="Few-Shot Generalization Across Dialogue Tasks（paper）">
                  Few-Shot Generalization Across Dialogue Tasks（paper） <i class="fa fa-angle-right"></i>
                </a>
            </div>
          </div>
    </footer>
  </article>
</div>






</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">

  <div class="copyright">
    &copy; 
    <span itemprop="copyrightYear">2024</span>
    <span class="with-love">
      <i class="fa fa-heart"></i>
    </span>
    <span class="author" itemprop="copyrightHolder">Javen Chen</span>
  </div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/pisces/" rel="noopener" target="_blank">NexT.Pisces</a>
  </div>

    </div>
  </footer>

  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>
  <div class="sidebar-dimmer"></div>
  <div class="back-to-top" role="button" aria-label="Back to top">
    <i class="fa fa-arrow-up fa-lg"></i>
    <span>0%</span>
  </div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/sidebar.js"></script><script src="/js/next-boot.js"></script>

  






  




  

  <script class="next-config" data-name="enableMath" type="application/json">true</script><script class="next-config" data-name="mathjax" type="application/json">{"enable":true,"tags":"none","js":{"url":"https://cdnjs.cloudflare.com/ajax/libs/mathjax/3.2.2/es5/tex-mml-chtml.js","integrity":"sha256-MASABpB4tYktI2Oitl4t+78w/lyA+D7b/s9GEP0JOGI="}}</script>
<script src="/js/third-party/math/mathjax.js"></script>



</body>
</html>
